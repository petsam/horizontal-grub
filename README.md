# horizontal-grub
This script will transform the current grub configuration file generated by grub(2), to a fake-horizontal style.

This bash script was created with focus on multi-booting systems and combined with [grub-theme-creator](https://github.com/petsam/grub-theme-creator) (GTC) Grub theme.

If you are not multi-booting, either with other Linux installations, or with non-linux systems supported by Grub, you may use it to implement PrettyGrub-GTC theming.

It is developed and tested on Manjaro Linux (Arch based), but it should also work on other Linux systems, perhaps with minor modification. I would appreciate any reports from users of any other distributions, or with mixed multi-booting systems, either verifying it works on their system, or reporting bugs and providing info (the files in the temporary working directory), so I try to fix any conflicts, or bugs.

### Requirements
* Grub2 bootloader
* Multi-booting system (optionally a single booting system can use [GTC](https://github.com/petsam/grub-theme-creator) features)
* Enabled os-prober in /etc/default/grub
* bash, awk

### Installation (suggested):
```
git clone https://github.com/petsam/horizontal-grub
cd horizontal-grub
chmod +x horizontal-grub
sudo cp horizontal-grub  /usr/local/bin
```

### Usage
* Install a PrettyGrub compatible grub theme
* Verify you have this (or using the defaults) in /etc/default/grub
```
GRUB_DISABLE_OS_PROBER=false
GRUB_DISABLE_SUBMENU=false
```
* Update grub configuration (with `update-grub` or `grub-mkconfig -o /boot/grub/grub.cfg`)
* Run in terminal (as a normal user)
```
sudo horizontal-grub -s system
```
or using a custom `grub.cfg` file (generated by grub)

```
horizontal-grub -f [PATH-TO-FILE]
```

After a successful creation, you will be asked to save to system, or locally.
If you choose to copy to system, a backup of your current grub.cfg will be created.
The saved backups are cleaned, keeping one by default, but you can set this to a different number.
If you choose to save locally, to review before saving to system, a suggested copy command will be printed in the output.
Here is the included help information:

```
horizontal-grub transforms the current grub configuration file generated by grub, to a fake-horizontal style
    Usage:
    -V|--version     Prints the program version
    -h|--help        This help information message
    -b|--backup NUM  Delete previous backup files, keeping only NUM backups. (Default=1)
    -f|--grub-file PATH  PATH is the full or relative path to a custom grub.cfg file.
                     If the parameter is not used, /boot/gru/grub.cfg is used
    -s|--save TARGET Saves the produced grub.cfg file to TARGET without confirmation
                     TARGET values are 'system' (save at /boot/grub/grub.cfg)
                       or 'local' (save at TMPDIR i.e. /tmp/horizontal-grub-xxxxxx/grub.cfg)
    -v|--verbose     Shows detailed activity information
```